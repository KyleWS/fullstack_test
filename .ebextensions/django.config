commands:
  01_node_install:
    cwd: /tmp
    test: '[ ! -f /usr/bin/node ] && echo "node not installed"'
    command: 'sudo yum install -y nodejs --enablerepo=epel'
  02_npm_install:
    cwd: /tmp
    test: '[ ! -f /usr/bin/npm ] && echo "npm not installed"'
    command: 'sudo apt-get install npm'
  03_node_update:
    cwd: /tmp
    test: '[ ! -f /usr/bin/n ] && echo "node not updated"'
    command: 'sudo npm install -g n && n stable'

container_commands: 
  01_npm_build:
    command: 'npm install'
  02_webpack_build:
    command: './node_modules/.bin/webpack --config webpack.config.js'
  03_collectstatic: 
    command: "source /opt/python/run/venv/bin/activate && python manage.py collectstatic --noinput" 

option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: fullstack_test/wsgi.py
    NumProcesses: 3
    NumThreads: 20
  aws:elasticbeanstalk:container:python:staticfiles: 
    "/static/": "www/static/" 

